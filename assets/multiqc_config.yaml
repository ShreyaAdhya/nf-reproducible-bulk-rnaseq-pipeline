###############################################################################
# MultiQC configuration for Bulk RNA-seq Nextflow pipeline
###############################################################################

title: "Bulk RNA-seq MultiQC Report"
subtitle: "Quality control and alignment summary"
intro_text: >
  This report summarizes quality control, trimming, alignment, and
  quantification metrics generated by the Nextflow bulk RNA-seq pipeline.

report_header_info:
  - Contact: "Bioinformatics Team"
  - Pipeline: "bulk-rnaseq-nextflow"
  - Workflow: "FASTQC → fastp → STAR → featureCounts → RSeQC → MultiQC"

###############################################################################
# File search patterns
###############################################################################

sp:
  fastqc:
    fn: "*_fastqc.zip"
  fastp:
    fn: "*.json"
  star:
    fn: "*Log.final.out"
  featurecounts:
    fn: "gene_counts.txt"
  rseqc:
    fn: "*.inner_distance.txt"

###############################################################################
# General behaviour
###############################################################################

run_modules:
  - fastqc
  - fastp
  - star
  - featureCounts
  - rseqc

ignore_images: false
no_ansi: true

###############################################################################
# Sample name cleaning
###############################################################################

sample_names:
  truncate:
    - "_R1"
    - "_R2"
    - ".trim"
    - ".fastq.gz"
    - ".bam"

###############################################################################
# Section ordering
###############################################################################

module_order:
  - fastqc
  - fastp
  - star
  - rseqc
  - featureCounts

###############################################################################
# FastQC
###############################################################################

fastqc:
  show_per_base_sequence_quality: true
  show_per_sequence_gc_content: true
  show_adapter_content: true
  show_overrepresented_sequences: true

###############################################################################
# fastp
###############################################################################

fastp:
  trim_front1: true
  trim_front2: true
  trim_tail1: true
  trim_tail2: true
  duplication_rate: true
  insert_size: true

###############################################################################
# STAR alignment
###############################################################################

star:
  general_stats:
    - "Number of input reads"
    - "Uniquely mapped reads %"
    - "% of reads mapped to multiple loci"
    - "% of reads unmapped: too many mismatches"
    - "% of reads unmapped: too short"
    - "% of reads unmapped: other"

###############################################################################
# featureCounts
###############################################################################

featureCounts:
  general_stats:
    - "Assigned"
    - "Unassigned_NoFeatures"
    - "Unassigned_Ambiguity"
    - "Unassigned_MultiMapping"
    - "Unassigned_Unmapped"

###############################################################################
# RSeQC
###############################################################################

rseqc:
  infer_experiment:
    show: true
  gene_body_coverage:
    show: true
  inner_distance:
    show: true
  read_distribution:
    show: true

###############################################################################
# Custom content (interactive plots, PCA, etc.)
###############################################################################

custom_data:
  pca_interactive:
    file_format: html
    section_name: "Interactive PCA"
    description: "PCA of normalized gene expression (Plotly)"
    files:
      - "PCA_interactive.html"

###############################################################################
# Table and plot behaviour
###############################################################################

table_columns_visible:
  FastQC:
    percent_gc: true
    avg_sequence_length: true
    total_sequences: true

  STAR:
    uniquely_mapped_reads_percent: true
    reads_mapped_to_multiple_loci_percent: true

  fastp:
    duplication_rate: true
    insert_size_peak: true

###############################################################################
# Styling
###############################################################################

extra_css: |
  .mqc-section-title {
    color: #2C3E50;
  }

  .mqc-table thead th {
    background-color: #ECF0F1;
    font-weight: bold;
  }

###############################################################################
# Export options
###############################################################################

export_plots: true
export_tables: true
